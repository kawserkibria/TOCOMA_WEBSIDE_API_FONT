// <auto-generated/>
#pragma warning disable 1591
#pragma warning disable 0414
#pragma warning disable 0649
#pragma warning disable 0169

namespace TOCOMA_ERP_System.Pages.Stock
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "G:\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "G:\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "G:\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "G:\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "G:\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "G:\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "G:\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "G:\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "G:\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using TOCOMA_ERP_System;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "G:\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using TOCOMA_ERP_System.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "G:\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using TOCOMA_ERP_ClassLibrary.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "G:\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using Blazored.Toast;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "G:\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using Blazored.Toast.Services;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "G:\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using TOCOMA_ERP_System.Controller;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "G:\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using Microsoft.AspNetCore.ProtectedBrowserStorage;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "G:\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using TOCOMA_ERP_System.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 17 "G:\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using Microsoft.AspNetCore.Hosting;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.LayoutAttribute(typeof(CustomLayout))]
    [Microsoft.AspNetCore.Components.RouteAttribute("/StockStatement")]
    public partial class StockStatement : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
        }
        #pragma warning restore 1998
#nullable restore
#line 125 "G:\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\Pages\Stock\StockStatement.razor"
       
    List<PurchaseOrderViewModel> poList = new List<PurchaseOrderViewModel>();
    List<PurchaseOrderViewModel> pOrderView = new List<PurchaseOrderViewModel>();
    PurchaseOrderViewModel poModel = new PurchaseOrderViewModel();
    List<StockModel> stockList = new List<StockModel>();
    DateTime PO_FROM_DATE = System.DateTime.Now;
    DateTime PO_TO_DATE = System.DateTime.Now;
    string reportType;

    protected override async Task OnInitializedAsync()
    {
        await GetStock();
        StateHasChanged();
        await JSRuntime.InvokeAsync<object>("TestDataTablesAdd", "#example");
    }
    private async Task GetStock()
    {
        stockList = await Http.GetJsonAsync<List<StockModel>>(Utility.BaseUrl + "api/Stock/GetStockStatement");
    }

    protected async Task GetData()
    {
        if (reportType == "2")
        {
            //await GetPODetailsItemByPOID(PO_FROM_DATE, PO_TO_DATE);
            pOrderView = await Http.GetJsonAsync<List<PurchaseOrderViewModel>>(Utility.BaseUrl + "api/Purchase/GetPurchaseOrderIdByPurchaseDate/" + PO_FROM_DATE + "/" + PO_TO_DATE);
        }
        else if (reportType == "3")
        {
            await GetDailyPurchaseStatement(PO_FROM_DATE, PO_TO_DATE);
        }

    }
    private async Task PrintOption()
    {
        if (reportType == "1") { await Http.PostJsonAsync("https://localhost:44350/Report/PurchaseOrder", poModel); }
        else if (reportType == "2")
        {
            await GetPODetailsItemByPOID(PO_FROM_DATE, PO_TO_DATE);
            await Http.PostJsonAsync("https://localhost:44350/Report/PurchaseOrderTracker", pOrderView);
        }
        else if (reportType == "3")
        {
            await GetDailyPurchaseStatement(PO_FROM_DATE, PO_TO_DATE);
            await Http.PostJsonAsync("https://localhost:44350/Report/PurchaseOrderTracker", pOrderView);
        }
    }
    private async Task GetDailyPurchaseStatement(DateTime date1, DateTime date2)
    {
        pOrderView = await Http.GetJsonAsync<List<PurchaseOrderViewModel>>(Utility.BaseUrl + "api/Purchase/GetDailyPurchaseStatementByDate/" + date1 + "/" + date2);
    }
    private async Task GetPODetailsItemByPOID(DateTime date1, DateTime date2)
    {
        //pOrderView = await Http.GetJsonAsync<List<PurchaseOrderViewModel>>(Utility.BaseUrl + "api/Purchase/GetPurchaseOrderByPOId/" + poId);
        pOrderView = await Http.GetJsonAsync<List<PurchaseOrderViewModel>>(Utility.BaseUrl + "api/Purchase/GetPurchaseOrderIdByPurchaseDate/" + date1 + "/" + date2);

        //foreach (var p in pOrderView)
        //{
        //    //purchaseOrderDetailsListByPO_Id = new List<PurchaseOrderDetailsEntity>();
        //    //purchaseOrderDetailsListByPO_Id = await Http.GetJsonAsync<List<PurchaseOrderDetailsEntity>>(Utility.BaseUrl + "api/Purchase/GetPurchaseOrderDetailsByPO_ID/" + p.PO_ID);
        //    if (!checkedPOIds.Contains(Convert.ToString(p.PO_ID)))
        //    {
        //        checkedPOIds.Add(Convert.ToString(p.PO_ID));
        //    }
        //    str = String.Join(",", checkedPOIds);

        //    //p.pOrderDetailsList= purchaseOrderDetailsListByPO_Id.FindAll(x => x.PO_ID == p.PO_ID);

        //    //p.pOrderDetailsList = await Http.GetJsonAsync<List<PurchaseOrderDetailsEntity>>(Utility.BaseUrl + "api/Purchase/GetPurchaseOrderDetailsByPO_ID/" + poId);
        //}
        //purchaseOrderDetailsListByPO_Id = await Http.GetJsonAsync<List<PurchaseOrderDetailsEntity>>(Utility.BaseUrl + "api/Purchase/GetPurchaseOrderDetailsBYPO_ID_IN/" + str);
        //foreach (var p in pOrderView)
        //{
        //    p.pOrderDetailsList = new List<PurchaseOrderDetailsEntity>();
        //    p.pOrderDetailsList = purchaseOrderDetailsListByPO_Id.FindAll(x => x.PO_ID == p.PO_ID);

        //}
        ////p.pOrderDetailsList = purchaseOrderDetailsListByPO_Id.FindAll(x => x.PO_ID == p.PO_ID);
        this.StateHasChanged();


    }
    async void CheckboxClicked(string poId, object checkedValue)
    {
        if ((bool)checkedValue)
        {
            await GetPOItemByPOID(poId);
            //if (!checkedBrandIds.Contains(poId))
            //{
            //    checkedBrandIds.Add(poId);
            //}
        }
        //else
        //{
        //    if (checkedBrandIds.Contains(poId))
        //    {
        //        checkedBrandIds.Remove(poId);
        //    }
        //}
        //str = String.Join(",", checkedBrandIds);



    }
    protected async void ReportType_Clicked(ChangeEventArgs categoryevent)
    {
        //pOrderView.REPORT_TYPE = categoryevent.Value.ToString();
        reportType = categoryevent.Value.ToString();
        this.StateHasChanged();
    }
    private async Task GetPOItemByPOID(string poId)
    {
        poModel = await Http.GetJsonAsync<PurchaseOrderViewModel>(Utility.BaseUrl + "api/Purchase/GetPurchaseOrderByPOId/" + poId);
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime JSRuntime { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private HttpClient Http { get; set; }
    }
}
#pragma warning restore 1591
