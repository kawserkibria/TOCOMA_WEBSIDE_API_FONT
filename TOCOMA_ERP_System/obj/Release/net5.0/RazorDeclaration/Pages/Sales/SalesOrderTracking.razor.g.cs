// <auto-generated/>
#pragma warning disable 1591
#pragma warning disable 0414
#pragma warning disable 0649
#pragma warning disable 0169

namespace TOCOMA_ERP_System.Pages.Sales
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "F:\Project\Company All Project\TocomaERP\Project\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "F:\Project\Company All Project\TocomaERP\Project\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "F:\Project\Company All Project\TocomaERP\Project\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "F:\Project\Company All Project\TocomaERP\Project\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "F:\Project\Company All Project\TocomaERP\Project\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "F:\Project\Company All Project\TocomaERP\Project\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "F:\Project\Company All Project\TocomaERP\Project\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "F:\Project\Company All Project\TocomaERP\Project\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "F:\Project\Company All Project\TocomaERP\Project\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using TOCOMA_ERP_System;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "F:\Project\Company All Project\TocomaERP\Project\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using TOCOMA_ERP_System.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "F:\Project\Company All Project\TocomaERP\Project\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using TOCOMA_ERP_ClassLibrary.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "F:\Project\Company All Project\TocomaERP\Project\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using Blazored.Toast;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "F:\Project\Company All Project\TocomaERP\Project\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using Blazored.Toast.Services;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "F:\Project\Company All Project\TocomaERP\Project\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using TOCOMA_ERP_System.Controller;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "F:\Project\Company All Project\TocomaERP\Project\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using Microsoft.AspNetCore.ProtectedBrowserStorage;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "F:\Project\Company All Project\TocomaERP\Project\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using TOCOMA_ERP_System.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 17 "F:\Project\Company All Project\TocomaERP\Project\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\_Imports.razor"
using Microsoft.AspNetCore.Hosting;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.LayoutAttribute(typeof(CustomLayout))]
    [Microsoft.AspNetCore.Components.RouteAttribute("/SalesOrderTracking")]
    public partial class SalesOrderTracking : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
        }
        #pragma warning restore 1998
#nullable restore
#line 244 "F:\Project\Company All Project\TocomaERP\Project\TOCOMA\TOCOMA_ERP_System\TOCOMA_ERP_System\Pages\Sales\SalesOrderTracking.razor"
       
    List<SalesOrderViewModel> salesorderList = new List<SalesOrderViewModel>();
    List<SalesItemDetailsModel> salesDetails = new List<SalesItemDetailsModel>();
    SalesOrderModel sales = new SalesOrderModel();
    string quotation_ref_date;
    string eta_1st_date;
    string eta_2nd_date;
    string eta_3rd_date;
    string ed_1st_date;
    string ed_2nd_date;
    string ed_3rd_date;
    string message;
    protected override async Task OnInitializedAsync()
    {
        try
        {
            await GetAllData();
            StateHasChanged();
            await JsRuntime.InvokeAsync<object>("TestDataTablesAdd", "#example");
        }
        catch(Exception ex)
        {
            //toastService.ShowError(ex.Message);
        }



    }
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await JsRuntime.InvokeVoidAsync("JsInteropDatepicker");
    }
    private async Task GetAllData()
    {
        salesorderList = await Http.GetJsonAsync<List<SalesOrderViewModel>>(Utility.BaseUrl + "api/Sales/GetSalesOrderTrackingInfo");
        salesDetails = await Http.GetJsonAsync<List<SalesItemDetailsModel>>(Utility.BaseUrl + "api/Sales/GetAllSalesItemDetails");
        List<SalesItemDetailsModel> sodetails = new List<SalesItemDetailsModel>();
        SalesItemDetailsModel sodetails1 = new SalesItemDetailsModel();
        foreach (var item in salesorderList)
        {
            try
            {
                sodetails = salesDetails.FindAll(el => el.SALES_ID == Convert.ToInt32(item.SALES_ID));
                foreach (var l in sodetails)
                {
                    sodetails1 = new SalesItemDetailsModel();
                    if (item.sorderDetailsList == null)
                    { item.sorderDetailsList = new List<SalesItemDetailsModel>(); }
                    sodetails1.ITEM_NAME = l.ITEM_NAME;
                    sodetails1.ITEM_ID = l.ITEM_ID;
                    sodetails1.SALES_ID = l.SALES_ID;
                    sodetails1.UOM = l.UOM;
                    sodetails1.SALES_QUANTITY= l.SALES_QUANTITY;
                    item.sorderDetailsList.Add(sodetails1);
                }
            }
            catch (Exception ex)
            {

            }
        }
    }
    public async Task EditSales()
    {

        try
        {
            //sales.ETA_TL_WH_1st_DATE = Convert.ToDateTime(sales.ETA_TL_WH_1st_DATE).Year+"/"+ Convert.ToDateTime(sales.ETA_TL_WH_1st_DATE).Month + "/" + Convert.ToDateTime(sales.ETA_TL_WH_1st_DATE).Day;
            //sales.ETA_TL_WH_2nd_DATE = eta_2nd_date;
            //sales.ETA_TL_WH_3rd_DATE = eta_3rd_date;
            //sales.EXPECTED_DELIVERY_1st_DATE = ed_1st_date;
            //sales.EXPECTED_DELIVERY_2nd_DATE = ed_2nd_date;
            //sales.EXPECTED_DELIVERY_3rd_DATE = ed_3rd_date;
            var data = await Http.PutJsonAsync<SalesOrderModel>(Utility.BaseUrl + "api/Sales/UpdateSalesTrackingInfo", sales);
            toastService.ShowSuccess("Update SuccessfullY !!");
            await GetAllData();
        }
        catch (Exception ex)
        {

        }

    }
    private async Task GetPOData(string Id)
    {
        try
        {
            sales.PO_WO_NUMBER = salesorderList.Find(x => x.SALES_ID == Id).PO_WO_NUMBER;
            sales.SALES_ID = Id;
            //PODate = purchaseOrderList.Find(x => x.PO_ID == Id).PO_DATE;
            //Vendor = purchaseOrderList.Find(x => x.PO_ID == Id).VENDOR_NAME;
            //concernPerson = purchaseOrderList.Find(x => x.PO_ID == Id).CONTACT_PERSON_NAME;
            sales.ETA_TL_WH_1st_DATE = salesorderList.Find(x => x.SALES_ID == Id).ETA_TL_WH_1st_DATE;
            sales.ETA_TL_WH_2nd_DATE = salesorderList.Find(x => x.SALES_ID == Id).ETA_TL_WH_2nd_DATE;
            sales.ETA_TL_WH_3rd_DATE = salesorderList.Find(x => x.SALES_ID == Id).ETA_TL_WH_3rd_DATE;
            sales.EXPECTED_DELIVERY_1st_DATE = salesorderList.Find(x => x.SALES_ID == Id).EXPECTED_DELIVERY_1st_DATE;
            sales.EXPECTED_DELIVERY_2nd_DATE = salesorderList.Find(x => x.SALES_ID == Id).EXPECTED_DELIVERY_2nd_DATE;
            sales.EXPECTED_DELIVERY_3rd_DATE = salesorderList.Find(x => x.SALES_ID == Id).EXPECTED_DELIVERY_3rd_DATE;
            sales.PARCHENTAGE_OF_COMPLETE = salesorderList.Find(x => x.SALES_ID == Id).PARCHENTAGE_OF_COMPLETE;
            //pOrderModel.EA_WH_1st_Date = purchaseOrderList.Find(x => x.PO_ID == Id).EA_WH_1st_Date;
            //pOrderModel.EA_WH_2nd_Date = purchaseOrderList.Find(x => x.PO_ID == Id).EA_WH_2nd_Date;
            //pOrderModel.EA_WH_3rd_Date = purchaseOrderList.Find(x => x.PO_ID == Id).EA_WH_3rd_Date;
            //receivedDate = Convert.ToString(purchaseOrderList.Find(x => x.PO_ID == Id).RECEIVED_DATE);
            //pOrderModel.SHIPMENT_STATUS = purchaseOrderList.Find(x => x.PO_ID == Id).SHIPMENT_STATUS;
        }
        catch (Exception ex)
        {

        }



        StateHasChanged();
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IToastService toastService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private Microsoft.JSInterop.IJSRuntime JsRuntime { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private HttpClient Http { get; set; }
    }
}
#pragma warning restore 1591
